---
import Layout from '@/layouts/Layout.astro';
import SectionContainer from '@/components/SectionContainer.astro';
import { SITE_CONFIG } from '@/config';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import Download from '@/components/icons/Download.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const cvUrl = lang === 'es' ? SITE_CONFIG.cvEs : SITE_CONFIG.cvEn;
const title = lang === 'es' ? 'Currículum Vitae' : 'Resume';
---

<Layout title={`Resume - ${SITE_CONFIG.name}`} description={`Resume of ${SITE_CONFIG.name}`}>
  <SectionContainer class="py-16 md:py-20 lg:py-24">
    <div class="max-w-5xl mx-auto">
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6 md:mb-8"
      >
        <h1 class="text-3xl md:text-4xl font-bold font-dm-sans text-white">
          {title}
        </h1>
        <a
          href={cvUrl}
          download
          class="inline-flex items-center gap-2 px-4 md:px-6 py-2 md:py-3 text-sm font-semibold rounded-full
          bg-primary-green-vivid hover:bg-primary-green-muted text-black
          transition-all duration-300 hover:scale-105 hover:shadow-lg"
        >
          <Download />
          {t('hero.download-cv')}
        </a>
      </div>

      <div
        class="bg-gray-900 rounded-xl md:rounded-2xl shadow-2xl overflow-hidden border border-gray-800"
      >
        <div class="relative w-full" style="height: 70vh; min-height: 500px;">
          <iframe src={cvUrl} class="w-full h-full" title={title}></iframe>
        </div>
      </div>

      <div class="mt-6 md:mt-8 text-center">
        <a
          href="/en"
          class="text-primary-green-vivid hover:underline font-medium text-sm md:text-base"
        >
          ← {lang === 'es' ? 'Volver al inicio' : 'Back to home'}
        </a>
      </div>
    </div>
  </SectionContainer>
</Layout>

<style>
  iframe {
    border: none;
  }
</style>
